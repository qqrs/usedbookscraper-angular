<div class="span6 offset3">

<h1>select books</h1><br>

<div ng-show="loading">
  <img src="/static/spinner.gif"> &nbsp;&nbsp;&nbsp;
  Loading books...
</div>
<div ng-hide="loading">
  <div ng-show="!books.length">
    <h4>No books found.</h4>
  </div>

  <div ng-hide="!books.length">
    <form ng-submit="submitSelectedBooks(selected_books)" ng-disabled="!books.length">
      <div>
        Select
        <a href="" ng-click="setAllSelections(true)">All</a> / 
        <a href="" ng-click="setAllSelections(false)">None</a>
        <button type="submit" class="btn btn-primary pull-right">continue &gt;&gt;</button>
      </div><br>
      <div ng-repeat="book in books">
        <label class="well well-small" ng-disabled="!book.isbn" >
          <input ng-model="selection[$index]" type="checkbox" ng-disabled="!book.isbn" class="books-checkbox">
          <img ng-src="{{book.small_image_url}}" class="books-img">
          <div class="books-label">
            <div><b>{{book.title}}</b></div>
            <div>{{book.author}}</div>
            <div>
              <ng-form class="form-inline book-options-form" ng-hide="!book.isbn || !selection[$index]">
                <fieldset class="book-options-fieldset" ng-disabled="!selection[$index]">
                  <div>
                    desirability:
                    <select ng-model="book.options.desirability" 
                      ng-options="opt[1] as opt[0] for opt in desirabilityChoices"
                      class="input-mini book-options-select">
                    </select>
                    &nbsp;&nbsp;
                    condition:
                    <select class="book-options-select" ng-model="book.options.condition"
                      ng-options="cond | bookConditionHuman for cond in bookConditions">
                    </select>
                  </div>
                  <div>
                    max price: $
                    <input type="number" step="0.01" min="0.00" required
                      class="input-mini book-options-input" ng-model="book.options.maxprice">
                    &nbsp;&nbsp;
                    <label class="checkbox book-options-label">
                      <input type="checkbox" ng-model="book.options.excludeLibrary">
                      exclude library
                    </label>
                    &nbsp;&nbsp;
                    <label class="checkbox book-options-label">
                      <input type="checkbox" ng-model="book.options.excludeCliffsNotes">
                      exclude cliff's notes
                    </label>
                  </div>
                </fieldset>
              </ng-form>
            </div>
            <span ng-if="!book.isbn" class="label label-important">No ISBN</span>
          </div>
        </label>
      </div>
      <button type="submit" class="btn btn-primary pull-right">continue &gt;&gt;</button>
    </form>
  </div>

</div>
</div>
